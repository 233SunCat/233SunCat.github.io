---
title: 进程/内存管理
date: 2021-03-12 22:58:40
categories: 
- 操作系统
- 进程/内存管理
---
进程控制
	进程的创建：1.分配唯一进程标识符，并申请空白PCB。2.为进程分配资源，若是资源不足则进程阻塞，3.初始化PCB。4，插入就绪队列
	进程的切换(内核支持)：1.保存上下文，2.更新PCB，3.PCB移入相应的队列，4.选择另一个进程，并更新PCB，5.更新内存管理的数据结构，6.恢复上下文
进程的组成
	1.PCB，2.程序段(cpu执行的代码)，3.数据段(原始数据中间最终结果)
进程通信
	(特殊的消息队列)管道，消息队列，共享内存，信号量，socket

线程的通信：
	

介绍管道：
	pipe管道(亲族)，FIFO管道(不相干的进程)
	管道是用于进程之间通信的方式，管道在操作系统中就是文件
	发送进程会把管道给写满，之后接受进程才会接受
	等管道空了，之后发送进程才能够再次发送数据
	管道属于半双工通信：可以双向，但是某一时刻只能单向传输
	管道是缓冲区且开在内核区？
	fork()会调用两次
	一次：父进程返回子进程的id
	二次：子进程返回的值为0
	实验中：
进程调度
　　1.先来先服务，从就绪队列里输出一个(非抢占)
　　2.短服务优先，选择一个估计服务时间最短的进程放入就绪队列
　　3.最短剩余时间优先，选择服务时间最短的占领CPU，当就绪队列第一个服务时间比它剩余的时间要短则抢占(抢占)
　　4.响应比优先，作业响应比计算：（等待时间 + 服务时间） / 服务时间
　　5.时间片，进程分一个片，各个进程都能执行
进程同步
死锁
进程与线程：
	进程是资源分配的基本单位，线程是调度与执行的基本单位
一个进程中线程共享问题：
			线程共享的环境包括：进程代码段、进程的公有数据(利用这些共享的数据，线程很容易的实现相互之间的通讯)、进程打开的文件描述符、信号的处理器、进程的当前目录和进程用户ID与进程组ID。
我想要记忆恐怕有些困难：从现有的知识推导记忆，代码中进程的代码与公共数据是可以共享的

开销方面：为什么线程比进程开销小？
最简单的理解线程的上下文比进程的上下文要小，所以切换起来要开销小

如何实现线程的同步？
	互斥量/信号量

好好理解什么是互斥量与信号量：互斥量是特殊的信号量

CPU的调度算法：
	（1）先来先服务（不分割，先来的先做）
（2）短作业优先（不分割，运行完当前的后找最短的执行）
（3）时间片轮转（设定一个时间片的大小，然后把任务分成n部分，选等的久的）

10.死锁的定义及产生条件
定义：死锁是指两个或两个以上的进程在执行过程中，由于竞争资源或者由于彼此通信而造成的一种阻塞的现象，若无外力作用，它们都将无法推进下去。
**产生条件：**
（1）互斥条件：一段时间内某资源只能由一个进程占有
（2）占有并等待：进程已经占有了至少一个资源，但又提出了新的资源要求，而该资源已经被其他进程占有，此时进程阻塞，但对已经获得的资源保持不放
（3）不可抢占：进程不能被抢占，即资源只能被进程在完成任务后自愿释放
（4）环路条件：存在一个进程与资源的环形链，在该链中，每个进程都在等待一个被占用的资源

进程与线程：定义，区别，通信，同步，

死锁：产生的条件，解决办法

CPU对进程的调度算法

**早期的计算机内存使用：**

　　直接使用物理地址，如果多个程序都放入内存中会引发很多问题：

　　1.进程之间地址不隔离，容易互相修改，引发安全问题 2. 内存效率太低，因为进程是随机分配地址，所以零散的空间不能合并起来利用 3.程序运行地址不确定

 

分段-------为了解决地址隔离以及地址不确定的问题

分段---中间层，也就是间接寻找物理地址，即虚拟内存(引入逻辑地址)

为每个进程分配一个虚拟的4GB空间

此时分段还是将一整个程序导入内存中使用，时间空间效率都底下

 

分页则可以只导入要使用的部分(页)

重点还分页：请求页(怎能请求页面)，置换页（该换谁怎么换），页面分配（一次要读多少页）

请求页有点看不懂

**页面置换算法：**

​		最佳置换算法：(无法实现只能作为参考)，淘汰以后都不用或者长时间不用的页面

​		先进先出算法

​		最近最久未使用置换算法：加载进来的页面，每个都有个时间标记，记录自从上次被访问到现在的时间

​		时钟置换算法：第一次进来的全置为1，之后被访问到的时候也置为1，寻找0的页面，其中遇到的1都置为0，某一页被替换时指针指									向下一帧，

**页面分配策略：**

​	驻留集大小(调入多少页)

​	调入页面的时机：1.预测调页(猜测可能哪个用的多，由程序员控制用于进程首次调入)，2.请求调入（运行期间需要的时候请求调入）

​									外存分为文件区与对换区(用来进程页面调用的)，文件区零散分布，对换区连续分布所以快

​	从何处调入页面：1.系统对换区空间足够：只使用对换区调用，2.系统对换区空间不足：不修改的使用文件区，需要修改的使用对换区